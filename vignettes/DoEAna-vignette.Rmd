---
title: "DoEAna-vignette"
output: rmarkdown::html_vignette
description: >
  Start here if this is your first time using DoEAna. You'll learn why we made 
  this package and all the analysis functions in it. 
vignette: >
  %\VignetteIndexEntry{DoEAna-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
# https://r-pkgs.org/vignettes.html
library(DoEAna)
```

## Optimal Design of Experiments

It's a relatively new field of statisticsâ€”in 1935, Ronald Fisher published The Design of Experiments, establishing classical designs for various types of experiments. With the rise of computing power came optimal design, where statisticians are able better customize designs according to the needs of the researchers running the experiment. Now, designs can be generated based on various criterions and metrics instead of simply selecting a design from a catalog. 

The purpose of this package is to fast-track comparison of optimal space-filling designs generated by the Maxmin criterion, which would have been very helpful in undergraduate research. So, let's analyze some optimal space-filling designs with just a few lines of code!

## The DoEAna package 
In this package, we wrote several functions to compute various analysis on different designs. 

This includes 
* printing the raw design matrix with `print_design()`
* plotting the design on the hypercube or simplex with `plot_design()`
* viewing the relative efficiencies of three designs with `relative_efficiency()`
* making a Fraction of Design Space plot for two designs with `fds_plot()`

## The sf_designs data set
The internal dataset in DoEAna is `sf_designs`. It is A collection of optimal Maxmin space-filling designs on the hypercube and simplex for n = 10, 20, 30 experimental runs. There are k = 2 experimental factors for the hypercube k = 3 for the simplex. These were found with three different distance metrics: Manhattan, Euclidean, and Chebyshev. This dataset was generated by Rebekah Scott's undergraduate research with Dr. Stephen Walsh at Utah State University. 

## First, select and plot a design
If you're using the sf_designs data, decide which geometry, distance metric and number of experimental runs you'd like! After you select a design, you can print the design matrix and plot it.

```{r}
# for the hypercube 
my_design_hyper <- select_design(d_data = sf_designs, geometry = "hypercube", distance = "chebyshev", n = 30)
print_design(my_design_hyper)
plot_design(my_design_hyper)
```

## Next, compute relative efficencies 

Relative Efficiency is the easiest way of comparing designs generated for different criterion. To do this, we compute the minimum distance score on each of the designs with all three criterions, divide by the optimal score on the criterion, and then put it all in a table. With DoEAna, you are able to compute the relative efficency table for designs created with the manhattan, euclidean, and chebyshev distance metrics.  

Here's an example across the same number of experimental runs: 

```{r}
# first select the designs 
# for this, we're doing n = 20 across the hypercube!
my_designM_H <- select_design(d_data = sf_designs, geometry = "hypercube",
                            distance = "manhattan", n = 20)
my_designE_H <- select_design(d_data = sf_designs, geometry = "hypercube",
                            distance = "euclidean", n = 20)
my_designC_H <- select_design(d_data = sf_designs, geometry = "hypercube",
                            distance = "chebyshev", n = 20)

relative_efficiency(m_row = my_designM_H, e_row = my_designE_H, 
                    c_row = my_designC_H)
```

## Finally, create an FDS plot
Fraction of Design Space Plots were created by Dr. Alyaa Abdelaziz. This analysis tool enables us to compare the relative prediction variance across the design space for two (or more) designs. With DoEAna, we're able to create FDS plots for two designs, as shown below.

```{r}
fds_plot(design1 = my_designC_H, design2 = my_designM_H, 
         title = "Chebychev vs Manahattan Distance for n=20")
```


